/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./themes/hexo-theme-matery/source/js/hexo.js":
/*!****************************************************!*\
  !*** ./themes/hexo-theme-matery/source/js/hexo.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"setSS\": () => (/* binding */ setSS),\n/* harmony export */   \"removeSS\": () => (/* binding */ removeSS),\n/* harmony export */   \"getSS\": () => (/* binding */ getSS),\n/* harmony export */   \"setLS\": () => (/* binding */ setLS),\n/* harmony export */   \"removeLS\": () => (/* binding */ removeLS),\n/* harmony export */   \"getLS\": () => (/* binding */ getLS)\n/* harmony export */ });\n/* harmony import */ var _live2d_waifu_tips_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../live2d/waifu-tips.js */ \"./themes/hexo-theme-matery/source/live2d/waifu-tips.js\");\n/* harmony import */ var _search__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./search */ \"./themes/hexo-theme-matery/source/js/search.js\");\n\r\n\r\n// SessionStorage localStorage 操作\r\nconst setSS = (k, v) => {\r\n    try {\r\n        sessionStorage.setItem(k, v);\r\n    } catch (e) {\r\n    }\r\n}\r\nconst removeSS = (k) => {\r\n    try {\r\n        sessionStorage.removeItem(k);\r\n    } catch (e) {\r\n    }\r\n}\r\nconst getSS = (k) => {\r\n    try {\r\n        return sessionStorage.getItem(k);\r\n    } catch (e) {\r\n        return null\r\n    }\r\n}\r\nconst setLS = (k, v) => {\r\n    try {\r\n        localStorage.setItem(k, v);\r\n    } catch (e) {\r\n    }\r\n}\r\nconst removeLS = (k) => {\r\n    try {\r\n        localStorage.removeItem(k);\r\n    } catch (e) {\r\n    }\r\n}\r\nconst getLS = (k) => {\r\n    try {\r\n        return localStorage.getItem(k);\r\n    } catch (e) {\r\n        return null\r\n    }\r\n}\r\n\r\n/* 添加文章卡片 hover 效果 */\r\nconst articleCardHover = function () {\r\n    const animateClass1 = 'animated';\r\n    const animateClass2 = 'pulse';\r\n    for (let el of document.querySelectorAll('article .article')) {\r\n        el.addEventListener('mouseover', () => {\r\n            el.classList.add(animateClass1);\r\n            el.classList.add(animateClass2);\r\n        })\r\n        el.addEventListener('mouseleave', () => {\r\n            el.classList.remove(animateClass1);\r\n            el.classList.remove(animateClass2);\r\n        })\r\n    }\r\n};\r\nif (window.innerWidth >= 1040) articleCardHover();\r\n\r\n/* 修复文章卡片 div 的宽度. */\r\nlet fixPostCardWidth = function (srcId, targetId) {\r\n    let srcDiv = document.getElementById(srcId);\r\n    if (!srcDiv) {\r\n        return;\r\n    }\r\n    let w = srcDiv.style.width;\r\n    if (w >= 450) {\r\n        w = w + 21;\r\n    } else if (w >= 350 && w < 450) {\r\n        w = w + 18;\r\n    } else if (w >= 300 && w < 350) {\r\n        w = w + 16;\r\n    } else {\r\n        w = w + 14;\r\n    }\r\n    const target = document.getElementById(targetId);\r\n    if (target) target.style.width = w;\r\n};\r\n\r\n/* 修复 footer 部分的位置，使得在内容比较少时，footer也会在底部 */\r\nlet fixFooterPosition = function () {\r\n    document.getElementsByClassName('content')[0].style.minHeight = window.innerHeight - 165;\r\n};\r\n\r\n/* 修复样式 */\r\nlet fixStyles = function () {\r\n    fixPostCardWidth('navContainer', 'articles');\r\n    fixPostCardWidth('artDetail', 'prenext-posts');\r\n    fixFooterPosition();\r\n};\r\nfixStyles();\r\n\r\n/* 调整屏幕宽度时重新设置文章列的宽度，修复小间距问题 */\r\nwindow.addEventListener('resize', () => fixStyles());\r\n\r\n/* 初始化瀑布流布局 */\r\nif (document.getElementById('articles')) {\r\n    const msnry = new Masonry(document.getElementById('articles'), {\r\n        itemSelector: '.article'\r\n    });\r\n}\r\n/* 文章内容详情的一些初始化特性 */\r\nlet articleInit = function () {\r\n    const articleA = document.querySelectorAll('#articleContent a')[0];\r\n    if (articleA) articleA.setAttribute('target', '_blank');\r\n    const artcleimg = document.querySelectorAll('#articleContent img');\r\n    for (let el of artcleimg) {\r\n        const imgPath = el.getAttribute('src');\r\n        el.innerHTML = `<div class=\"img-item\" data-src=\"${imgPath}\" data-sub-html=\".caption\">${el.innerHTML}</div>`\r\n        // 图片添加字幕\r\n        let alt = el.getAttribute('alt');\r\n        let title = el.getAttribute('title');\r\n        let captionText = \"\";\r\n        // 如果alt为空，title来替\r\n        if (alt === undefined || alt === \"\") {\r\n            if (title !== undefined && title !== \"\") {\r\n                captionText = title;\r\n            }\r\n        } else {\r\n            captionText = alt;\r\n        }\r\n        // 字幕不空，添加之\r\n        if (captionText !== \"\") {\r\n            let captionDiv = document.createElement('div');\r\n            captionDiv.className = 'caption';\r\n            let captionEle = document.createElement('b');\r\n            captionEle.className = 'center-caption';\r\n            captionEle.innerText = captionText;\r\n            captionDiv.appendChild(captionEle);\r\n            el.insertAdjacentElement('afterend', captionDiv);\r\n        }\r\n    }\r\n};\r\narticleInit();\r\nconst modalInstance = M.Modal.init(document.querySelectorAll('.modal'));\r\n\r\n/* 回到顶部 */\r\nconst backToTopBtn = document.getElementById('backTop');\r\nbackToTopBtn.addEventListener('click', () => {\r\n    window.scrollTo({top: 0, behavior: 'smooth'});\r\n    (0,_live2d_waifu_tips_js__WEBPACK_IMPORTED_MODULE_0__.showMessage)(\"飞到顶啦\", 1300, true);\r\n    return false;\r\n})\r\n\r\n/* 监听页面滚动 */\r\nwindow.onscroll = () => {\r\n    if (window.scrollY < 100) {\r\n        backToTopBtn.classList.add('btnHide');\r\n    } else {\r\n        backToTopBtn.classList.remove('btnHide');\r\n    }\r\n}\r\n\r\n/* 是否显示看板娘 */\r\nconst showLive2Dbtn = document.getElementById('show-live2d');\r\nconst checkLive2DHide = () => {\r\n    if (getSS('waifuHide') === '1') {\r\n        showLive2Dbtn.classList.remove('btnHide');\r\n        document.querySelector('#waifu').classList.add('hide');\r\n    }\r\n}\r\n// 为显示看板娘按钮添加事件\r\nshowLive2Dbtn.addEventListener('click', () => {\r\n    if (getSS('waifuHide') === '1') {\r\n        removeSS('waifuHide');\r\n        document.querySelector('#waifu').classList.remove('hide');\r\n        showLive2Dbtn.classList.add('btnHide');\r\n        (0,_live2d_waifu_tips_js__WEBPACK_IMPORTED_MODULE_0__.showMessage)(\"想我了吗？^_^\", 1300, true);\r\n        (0,_live2d_waifu_tips_js__WEBPACK_IMPORTED_MODULE_0__.initModel)(\"/live2d/waifu-tips.json\");\r\n    }\r\n})\r\n// 音频 url 列表\r\nconst musicList = [\r\n    \"/media/Music8_2_index.opus\",\r\n    \"/media/DawnWineryTheme.ogg\",\r\n    \"/media/Music0_1_index.ogg\",\r\n    \"/media/HappyJourney.ogg\",\r\n    \"/media/Music0_5_index.ogg\",\r\n    \"/media/Music5_3_index.ogg\",\r\n    \"/media/Music31_6_index.ogg\",\r\n    \"/media/Music15_4_index.ogg\",\r\n    \"/media/Music26_1_index.ogg\",\r\n    \"/media/Music19_5_index.ogg\",\r\n    \"/media/Music5_2_index.ogg\",\r\n    \"/media/Music1_2_index.ogg\",\r\n    \"/media/Music14_1.ogg\",\r\n    \"/media/PureSky.ogg\",\r\n    \"/media/Music27_3_index.ogg\",\r\n    \"/media/Music13_1_index.ogg\",\r\n    \"/media/Music26_9_index.ogg\"\r\n];\r\nlet currentTrack = 0;\r\nconst audioObj = new Audio();\r\n// 根据 sessionStorage 或者给定曲目得到音频 url\r\nconst getAudioUrl = (trackNo) => {\r\n    const t = getSS('track');\r\n    if (t !== null && t >= 0 && t <= musicList.length - 1) {\r\n        currentTrack = t;\r\n        return musicList[t]\r\n    } else {\r\n        return musicList[trackNo || 0];\r\n    }\r\n}\r\n// 读取音量值\r\nconst getVolume = () => {\r\n    const vol = getSS('volume');\r\n    if (vol !== null && vol >= 0 && vol <= 1) {\r\n        return vol;\r\n    } else {\r\n        setVolume(0.7);\r\n        return 0.7;\r\n    }\r\n}\r\n// 设置音量值\r\nconst setVolume = (vol) => {\r\n    setSS('volume', vol);\r\n}\r\n// 音量淡入\r\nconst volumeFadein = () => {\r\n    console.log('fadein')\r\n    const targetVol = getVolume();\r\n    const step = targetVol / 10;\r\n    const intervalId = setInterval(() => {\r\n        if (audioObj.volume + step < 1)\r\n            audioObj.volume = audioObj.volume + step;\r\n        if (Math.abs(targetVol - audioObj.volume) < 0.05) {\r\n            audioObj.volume = targetVol;\r\n            clearInterval(intervalId);\r\n        }\r\n    }, 30);\r\n}\r\n// 读取播放位置\r\nconst getAudioTime = () => {\r\n    const t = getSS('audioTime');\r\n    if (t !== null) {\r\n        removeSS('audioTime');\r\n        return t;\r\n    } else {\r\n        return 0;\r\n    }\r\n}\r\n// 每隔1.5秒存储当前播放位置，防止 window.onbeforeunload 不执行的情况\r\nconst setAudioTime = () => {\r\n    setInterval(() => {\r\n        if (audioObj.played.length !== 0) {\r\n            setSS('audioTime', audioObj.currentTime)\r\n        }\r\n    }, 1500);\r\n}\r\n// 切换下一首\r\nconst nextTrack = () => {\r\n    if (currentTrack >= musicList.length - 1)\r\n        currentTrack = 0;\r\n    else\r\n        currentTrack++;\r\n    setSS('track', currentTrack);\r\n    setSS('audioTime', 0);\r\n    audioObj.addEventListener(\"canplay\", audioCanplay);\r\n    audioObj.src = getAudioUrl(currentTrack);\r\n}\r\n// 不能自动播放 设置监听器\r\nconst canNotAutoplay = (e) => {\r\n    console.log('canAutoplay: False');\r\n    console.log(e);\r\n    // 触摸播放\r\n    document.addEventListener(\"touchstart\", clickPlay, false);\r\n    // 点击播放\r\n    document.addEventListener(\"click\", clickPlay, false);\r\n    // 指针移动播放\r\n    document.addEventListener('mousemove', clickPlay, false);\r\n}\r\n// 通过事件播放\r\nconst clickPlay = () => {\r\n    if (audioObj.played.length === 0)\r\n        audioObj.play().then(() => {\r\n            console.log('clickPlay');\r\n            // 成功播放 移除监听器\r\n            audioObj.removeEventListener('canplay', audioCanplay); // 移除 canplay 监听器的原因：跳转到指定位置时也会触发 canplay 事件，造成循环\r\n            document.removeEventListener(\"touchstart\", clickPlay, false);\r\n            document.removeEventListener(\"click\", clickPlay, false);\r\n            document.removeEventListener('mousemove', clickPlay, false);\r\n            audioObj.currentTime = getAudioTime();\r\n            volumeFadein();\r\n            setMuteImg();\r\n        }).catch();\r\n}\r\n// 首次播放函数 缓冲足够时调用\r\nconst audioCanplay = () => {\r\n    console.log('audio canplay ' + audioObj.src);\r\n    audioObj.play().then(() => {\r\n        // if (audioObj.played.length === 0 && window.navigator.userAgent.indexOf('Firefox') > 0 && audioObj.allowedToPlay === false)\r\n        //     throw new Error('fake autoplay'); // 部分 Firefox 在没有自动播放仍然执行了 then ，再判断一下\r\n        console.log('canAutoplay: True');\r\n        audioObj.removeEventListener('canplay', audioCanplay); // 移除 canplay 监听器的原因：跳转到指定位置时也会触发 canplay 事件，造成循环\r\n        audioObj.currentTime = getAudioTime();\r\n        volumeFadein();\r\n        setMuteImg();\r\n    }).catch(e => canNotAutoplay(e));\r\n}\r\n// 初始化播放器\r\nconst initPlayer = () => {\r\n    audioObj.volume = 0;\r\n    audioObj.src = getAudioUrl();\r\n    if (getSS('mute') !== '1') { // 之前已经静音的情况下不会自动播放\r\n        audioObj.addEventListener(\"canplay\", audioCanplay);\r\n    }\r\n}\r\ninitPlayer();\r\n// 监听当前曲目结束\r\naudioObj.addEventListener(\"ended\", () => {\r\n    nextTrack();\r\n});\r\n// 开始播放时监听\r\naudioObj.addEventListener('playing', setAudioTime);\r\n// 暂停时将音量设为0\r\naudioObj.addEventListener('pause', () => (audioObj.volume = 0));\r\n// 静音按钮图标切换\r\nconst setMuteImg = () => {\r\n    const unmuteBtn = document.getElementById(\"audioOff\");\r\n    const muteBtn = document.getElementById(\"audioOn\");\r\n    muteBtn.style.display = \"block\";\r\n    unmuteBtn.style.display = \"none\";\r\n}\r\nconst setUnmuteImg = () => {\r\n    const unmuteBtn = document.getElementById(\"audioOff\");\r\n    const muteBtn = document.getElementById(\"audioOn\");\r\n    muteBtn.style.display = \"none\";\r\n    unmuteBtn.style.display = \"block\";\r\n}\r\n// 为静音按钮添加事件\r\nconst addMuteBtnListener = () => {\r\n    const unmuteBtn = document.getElementById(\"audioOff\");\r\n    const muteBtn = document.getElementById(\"audioOn\");\r\n    if (audioObj.paused === false) setMuteImg();\r\n    muteBtn.addEventListener(\"click\", () => {\r\n        audioObj.pause();\r\n        setSS('mute', 1);\r\n        setUnmuteImg();\r\n        audioObj.removeEventListener('canplay', audioCanplay);\r\n    });\r\n    unmuteBtn.addEventListener(\"click\", () => {\r\n        setMuteImg();\r\n        setSS('mute', 0);\r\n        audioCanplay();\r\n    });\r\n}\r\n// 音量调整按钮\r\ndocument.querySelector('.waifu-tool .icon-volumeup').addEventListener('click', () => {\r\n    const vol = audioObj.volume;\r\n    const volInt = ((vol + 0.1) * 100).toFixed(0);\r\n    if (vol <= 0.9) {\r\n        audioObj.volume = vol + 0.1;\r\n        setVolume(vol + 0.1);\r\n        (0,_live2d_waifu_tips_js__WEBPACK_IMPORTED_MODULE_0__.showMessage)(\"音量增大到\" + volInt + \"%了哦\", 1300, true);\r\n    } else {\r\n        audioObj.volume = 1;\r\n        setVolume(1);\r\n        (0,_live2d_waifu_tips_js__WEBPACK_IMPORTED_MODULE_0__.showMessage)(\"声音不能再大啦\", 1300, true);\r\n    }\r\n})\r\ndocument.querySelector('.waifu-tool .icon-volumedown').addEventListener('click', () => {\r\n    const vol = audioObj.volume;\r\n    const volInt = ((vol - 0.1) * 100).toFixed(0);\r\n    if (vol > 0.11) {\r\n        audioObj.volume = vol - 0.1;\r\n        setVolume(vol - 0.1);\r\n        (0,_live2d_waifu_tips_js__WEBPACK_IMPORTED_MODULE_0__.showMessage)(\"音量减小到\" + volInt + \"%了哦\", 1300, true);\r\n    } else {\r\n        audioObj.volume = 0;\r\n        setVolume(0);\r\n        (0,_live2d_waifu_tips_js__WEBPACK_IMPORTED_MODULE_0__.showMessage)(\"声音不能再小啦\", 1300, true);\r\n    }\r\n})\r\nconst initSidebarNav = () => {\r\n    const elems = document.querySelectorAll('.sidenav');\r\n    const instances = M.Sidenav.init(elems);\r\n}\r\n// 检查页面加载状态\r\nif (document.readyState === \"interactive\") {\r\n    console.log('interactive')\r\n    initSidebarNav()\r\n    checkLive2DHide();\r\n    addMuteBtnListener();\r\n    (0,_search__WEBPACK_IMPORTED_MODULE_1__.searchFunc)(\"/\" + \"search.xml\", 'searchInput', 'searchResult');\r\n} else if (document.readyState === \"complete\") {\r\n    console.log('complete')\r\n} else {\r\n    window.addEventListener(\"DOMContentLoaded\", checkLive2DHide);\r\n    window.addEventListener(\"DOMContentLoaded\", addMuteBtnListener);\r\n    window.addEventListener(\"DOMContentLoaded\", initSidebarNav);\r\n}\r\n\r\n// 页面切换前将音频时间存储到 SessionStorage\r\nwindow.onbeforeunload = () => {\r\n    if (audioObj.played.length !== 0) {\r\n        setSS('audioTime', audioObj.currentTime)\r\n    }\r\n}\n\n//# sourceURL=webpack://hexo-site/./themes/hexo-theme-matery/source/js/hexo.js?");

/***/ }),

/***/ "./themes/hexo-theme-matery/source/js/search.js":
/*!******************************************************!*\
  !*** ./themes/hexo-theme-matery/source/js/search.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"searchFunc\": () => (/* binding */ searchFunc)\n/* harmony export */ });\nconst searchFunc = (path, search_id, content_id) => {\r\n    'use strict';\r\n    window.fetch(path)\r\n        .then(res => res.text())\r\n        .then(str => (new window.DOMParser()).parseFromString(str, \"text/xml\"))\r\n        .then((xmlResponse) => {\r\n            const datas = [];\r\n            // get the contents from search data\r\n            for (let el of xmlResponse.getElementsByTagName('entry')){\r\n                datas.push({\r\n                    title: el.getElementsByTagName('title')[0].textContent,\r\n                    content: el.getElementsByTagName('content')[0].textContent,\r\n                    url: el.getElementsByTagName('url')[0].textContent\r\n                })\r\n            }\r\n            const $input = document.getElementById(search_id);\r\n            const $resultContent = document.getElementById(content_id);\r\n            $input.addEventListener('input', function () {\r\n                var str = '<ul class=\\\"search-result-list\\\">';\r\n                var keywords = this.value.trim().toLowerCase().split(/[\\s\\-]+/);\r\n                $resultContent.innerHTML = \"\";\r\n                if (this.value.trim().length <= 0) {\r\n                    return;\r\n                }\r\n                // perform local searching\r\n                datas.forEach(function (data) {\r\n                    var isMatch = true;\r\n                    var content_index = [];\r\n                    var data_title = data.title.trim().toLowerCase();\r\n                    var data_content = data.content.trim().replace(/<[^>]+>/g, \"\").toLowerCase();\r\n                    var data_url = data.url;\r\n                    var index_title = -1;\r\n                    var index_content = -1;\r\n                    var first_occur = -1;\r\n                    // only match artiles with not empty titles and contents\r\n                    if (data_title != '' && data_content != '') {\r\n                        keywords.forEach(function (keyword, i) {\r\n                            index_title = data_title.indexOf(keyword);\r\n                            index_content = data_content.indexOf(keyword);\r\n                            if (index_title < 0 && index_content < 0) {\r\n                                isMatch = false;\r\n                            } else {\r\n                                if (index_content < 0) {\r\n                                    index_content = 0;\r\n                                }\r\n                                if (i == 0) {\r\n                                    first_occur = index_content;\r\n                                }\r\n                            }\r\n                        });\r\n                    }\r\n                    // show search results\r\n                    if (isMatch) {\r\n                        str += \"<li><a href='\" + data_url + \"' class='search-result-title'>\" + data_title + \"</a>\";\r\n                        var content = data.content.trim().replace(/<[^>]+>/g, \"\");\r\n                        if (first_occur >= 0) {\r\n                            // cut out 100 characters\r\n                            var start = first_occur - 20;\r\n                            var end = first_occur + 80;\r\n                            if (start < 0) {\r\n                                start = 0;\r\n                            }\r\n                            if (start == 0) {\r\n                                end = 100;\r\n                            }\r\n                            if (end > content.length) {\r\n                                end = content.length;\r\n                            }\r\n                            var match_content = content.substr(start, end);\r\n                            // highlight all keywords\r\n                            keywords.forEach(function (keyword) {\r\n                                var regS = new RegExp(keyword, \"gi\");\r\n                                match_content = match_content.replace(regS, \"<em class=\\\"search-keyword\\\">\" + keyword + \"</em>\");\r\n                            });\r\n\r\n                            str += \"<p class=\\\"search-result\\\">\" + match_content + \"...</p>\"\r\n                        }\r\n                        str += \"</li>\";\r\n                    }\r\n                });\r\n                str += \"</ul>\";\r\n                $resultContent.innerHTML = str;\r\n            });\r\n        })\r\n}\n\n//# sourceURL=webpack://hexo-site/./themes/hexo-theme-matery/source/js/search.js?");

/***/ }),

/***/ "./themes/hexo-theme-matery/source/live2d/waifu-tips.js":
/*!**************************************************************!*\
  !*** ./themes/hexo-theme-matery/source/live2d/waifu-tips.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"showMessage\": () => (/* binding */ showMessage),\n/* harmony export */   \"initModel\": () => (/* binding */ initModel)\n/* harmony export */ });\n/*****************************************************************************************************\n く__,.ヘヽ.　　　　/　,ー､ 〉\n 　　　　　＼ ', !-─‐-i　/　/´\n 　　　 　 ／｀ｰ'　　　 L/／｀ヽ､                 Live2D Widget Setting\n 　　 　 /　 ／,　 /|　 ,　 ,　　　 ',               Version 2.0.0\n 　　　ｲ 　/ /-‐/　ｉ　L_ ﾊ ヽ!　 i                     Konata\n 　　　 ﾚ ﾍ 7ｲ｀ﾄ　 ﾚ'ｧ-ﾄ､!ハ|　 |\n 　　　　 !,/7 '0'　　 ´0iソ| 　 |　　　\n 　　　　 |.从\"　　_　　 ,,,, / |./ 　 |      Add Live2D widget in your website.\n 　　　　 ﾚ'| i＞.､,,__　_,.イ / 　.i 　|\n 　　　　　 ﾚ'| | / k_７_/ﾚ'ヽ,　ﾊ.　|       Thanks:\n 　　　　　　 | |/i 〈|/　 i　,.ﾍ |　i　|    fghrsh / https://www.fghrsh.net/post/123.html\n 　　　　　　.|/ /　ｉ： 　 ﾍ!　　＼　|       journey-ad / https://github.com/journey-ad/live2d_src\n 　　　 　 　 kヽ>､ﾊ 　 _,.ﾍ､ 　 /､!         xiazeyu / https://github.com/xiazeyu/live2d-widget.js\n 　　　　　　 !'〈//｀Ｔ´', ＼ ｀'7'ｰr'      Cubism Web Framework & All model authors.\n 　　　　　　 ﾚ'ヽL__|___i,___,ンﾚ|ノ\n 　　　　　 　　　ﾄ-,/　|___./\n 　　　　　 　　　'ｰ'　　!_,.\n ****************************************************************************************************/\nconst live2d_settings = {\n    // 基本设置\n    'modelUrl': '/model',                       // 存放模型的文件夹路径，末尾不需要斜杠\n    'tipsMessage': '/live2d/waifu-tips.json',   // 看板娘提示消息文件的路径，可以留空不加载\n    // 模型设置\n    'modelName': 'paimon',                      // 默认加载的模型名称，仅在无本地记录的情况下有效\n    'modelStorage': true,                       // 记忆模型，下次打开页面会加载上次选择的模型\n    'modelRandMode': false,                     // 随机切换模型\n    'preLoadMotion': false,                     // 是否预载动作数据，只对 model3 模型有效，不预载可以提高 model3 模型的加载速度，但可能导致首次触发动作时卡顿\n    'tryWebp': true,                            // 如果浏览器支持 WebP 格式，将优先加载 WebP 格式的贴图，例如默认贴图文件为 klee.8192/texture_00.png，\n                                                // 启用后将优先加载 klee.8192/texture_00.png.webp，文件不存在会自动 fallback\n    // 工具栏设置\n    'showToolMenu': true,                       // 显示 工具栏\n    'canCloseLive2d': true,                     // 显示 关闭看板娘 按钮\n    'canSwitchModel': true,                     // 显示 模型切换 按钮\n    'canSwitchHitokoto': true,                  // 显示 一言切换 按钮\n    'canTakeScreenshot': true,                  // 显示 看板娘截图 按钮\n    'canTurnToHomePage': true,                  // 显示 返回首页 按钮\n    'canTurnToAboutPage': true,                 // 显示 跳转关于页 按钮\n    'showVolumeBtn': true,                      // 显示 音量控制 按钮，仅作显示，相关逻辑需自己实现\n    // 提示消息设置\n    'showHitokoto': true,                       // 空闲时显示一言\n    'hitokotoAPI': '',                          // 一言 API，可选 'hitokoto.cn'(默认), 'lwl12.com', 'jinrishici.com'(古诗词), 'fghrsh.net'\n    'showWelcomeMessage': true,                 // 显示进入页面欢迎词\n    'showCopyMessage': true,                    // 显示复制内容提示，默认只对 '#articleContent' 元素内的复制进行监视，如果你的文章内容不在这个标签下，可以在下方搜索并修改\n    'showF12OpenMsg': true,                     // 显示控制台打开提示\n    //看板娘样式设置\n    'live2dHeight': 680,                        // 看板娘高度，不需要单位\n    'live2dWidth': 500,                         // 看板娘宽度，不需要单位\n    'waifuMinWidth': '1040px',                  // 页面小于宽度小于指定数值时隐藏看板娘，例如 'disable'(禁用)，推荐 '1040px'\n    'waifuEdgeSide': 'right:0',                 // 看板娘贴边方向，例如 'left:0'(靠左 0px)，'right:30'(靠右 30px)，可以被下面的模型设置覆盖\n    // 其他杂项设置\n    'debug': true,                              // 全局 DEBUG 设置\n    'debugMousemove': false,                    // 在控制台打印指针移动坐标，仅在 debug 为 true 时可用\n    'logMessageToConsole': true,                // 在控制台打印看板娘提示消息\n    'l2dVersion': '2.0.0',                      // 当前版本\n    'homePageUrl': 'auto',                      // 主页地址，可选 'auto'(自动), '{URL 网址}'\n    'aboutPageUrl': 'https://github.com/Konata09/Live2dOnWeb/', // 关于页地址, '{URL 网址}'\n    'screenshotCaptureName': 'bronyaMoe.png',   // 看板娘截图文件名，例如 'live2d.png'\n}\n// 模型列表\nconst live2d_models = [\n    {\n        name: 'paimon',\n        message: '应急食品 bilibili@根瘤菌rkzj',\n        version: 3\n    },\n    {\n        name: 'klee2',\n        message: '可莉 bilibili@根瘤菌rkzj',\n        version: 3\n    },\n    {\n        name: 'klee',\n        message: '可莉 bilibili@根瘤菌rkzj',\n        version: 3,\n        position: 'left'\n    },\n    {\n        name: 'bronyaXinZhiHua',\n        message: '布洛妮娅心之花 @GhastRiv',\n        version: 2\n    },\n    {\n        name: 'houmuya',\n        message: '吼姆布洛妮娅 bilibili@呦克里斯汀娜呦',\n        version: 3\n    },\n    {\n        name: 'bronya',\n        message: 'Valkyrie System 启动',\n        version: 2\n    },\n    {\n        name: 'Kiana',\n        message: '终于轮到我了么！',\n        version: 2\n    },\n    {\n        name: 'Mei',\n        message: '烦死了，家里还有两个吃闲饭的等着我回去做晚餐呢',\n        version: 2\n    },\n    {\n        name: 'Lita',\n        message: '丽塔·洛丝薇瑟',\n        version: 2\n    },\n    {\n        name: 'Sakura',\n        message: '已经很久没有出场了呢',\n        version: 2\n    },\n    {\n        name: 'Theresa',\n        message: '要和德丽莎一起睡午觉吗?',\n        version: 2\n    },\n    {\n        name: 'Himeko',\n        message: '话说~休伯利安本来的舰长可是我呦 ~',\n        version: 2\n    },\n    {\n        name: 'Seele',\n        message: '舰长是来和希儿一起玩儿的吗?',\n        version: 2\n    },\n    {\n        name: 'xilin2.1',\n        message: '西琳小天使',\n        version: 2\n    },\n    {\n        name: 'SakuraQ',\n        message: '信浓的春野已经开满了樱花了吧……',\n        version: 2\n    },\n    {\n        name: 'Sin',\n        message: '杏·玛尔',\n        version: 2\n    },\n    {\n        name: 'kiro',\n        message: '时雨绮罗',\n        version: 2\n    },\n    {\n        name: 'lingyiniang',\n        message: '灵依娘',\n        version: 2\n    },\n    // {\n    //     name: '01niang',\n    //     message: '01娘',\n    //     version: 2\n    // },\n    {\n        name: 'houraiji',\n        message: '蓬莱寺九霄',\n        version: 2\n    },\n    {\n        name: 'kaguya',\n        message: '耀夜姬',\n        version: 2\n    },\n    {\n        name: 'keluoyi',\n        message: '柯罗伊',\n        version: 2\n    },\n    {\n        name: 'kika',\n        message: '无色辉火',\n        version: 2\n    },\n    {\n        name: 'Nina',\n        message: '妮娜',\n        version: 2\n    },\n    {\n        name: 'yiselin',\n        message: '伊瑟琳·利维休斯',\n        version: 2\n    },\n    {\n        name: 'Nindi',\n        message: '宁蒂·阿波卡利斯',\n        version: 2\n    },\n]\n/****************************************************************************************************/\n// SessionStorage LocalStorage 操作\nconst setSS = (k, v) => {\n    try {\n        sessionStorage.setItem(k, v);\n    } catch (e) {\n    }\n}\nconst removeSS = (k) => {\n    try {\n        sessionStorage.removeItem(k);\n    } catch (e) {\n    }\n}\nconst getSS = (k) => {\n    try {\n        return sessionStorage.getItem(k);\n    } catch (e) {\n        return null\n    }\n}\nconst setLS = (k, v) => {\n    try {\n        localStorage.setItem(k, v);\n    } catch (e) {\n    }\n}\nconst removeLS = (k) => {\n    try {\n        localStorage.removeItem(k);\n    } catch (e) {\n    }\n}\nconst getLS = (k) => {\n    try {\n        return localStorage.getItem(k);\n    } catch (e) {\n        return null\n    }\n}\nString.prototype.render = function (context) {\n    const tokenReg = /(\\\\)?{([^{}\\\\]+)(\\\\)?}/g;\n    return this.replace(tokenReg, function (word, slash1, token, slash2) {\n        if (slash1 || slash2) {\n            return word.replace('\\\\', '');\n        }\n        const variables = token.replace(/\\s/g, '').split('.');\n        let currentObject = context;\n        let i, length, variable;\n\n        for (i = 0, length = variables.length; i < length; ++i) {\n            variable = variables[i];\n            currentObject = currentObject[variable];\n            if (currentObject === undefined || currentObject === null) return '';\n        }\n        return currentObject;\n    });\n};\nconst $$ = (selector) => {\n    try {\n        const e = document.querySelectorAll(selector);\n        if (e.length === 1) {\n            return e[0];\n        } else\n            return Array.from(e);\n    } catch (e) {\n        console.error(e);\n        return null;\n    }\n}\nconst re = /x/;\nconsole.log(re);\nconst live2dId2 = 'live2d2';\nconst live2dId4 = 'live2d4';\nconst waifuTips = $$('#waifu-message');\nconst waifu = $$('#waifu');\n\nfunction getRandText(text) {\n    return Array.isArray(text) ? text[Math.floor(Math.random() * text.length + 1) - 1] : text\n}\n\nlet timeoutID;\n\nfunction testWebP() {\n    return new Promise(res => {\n        const webP = new Image();\n        webP.src = 'data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA';\n        webP.onload = webP.onerror = () => {\n            res(webP.height === 2);\n        };\n    })\n}\n\nfunction showMessage(text, timeout, flag) {\n    if (flag || getSS('waifu-text') === '' || getSS('waifu-text') === null) {\n        if (timeoutID) window.clearTimeout(timeoutID);\n        if (Array.isArray(text)) text = text[Math.floor(Math.random() * text.length + 1) - 1];\n        if (live2d_settings.logMessageToConsole) console.log('[WaifuTips]', text.replace(/<[^<>]+>/g, ''));\n        if (flag) setSS('waifu-text', text);\n        waifuTips.style.opacity = 1;\n        waifuTips.innerHTML = text;\n        if (timeout === undefined) timeout = 5000;\n        hideMessage(timeout);\n    }\n}\n\nfunction hideMessage(timeout) {\n    if (timeout === undefined) timeout = 5000;\n    timeoutID = window.setTimeout(function () {\n        removeSS('waifu-text');\n        waifuTips.style.opacity = 0;\n    }, timeout);\n}\n\nfunction changePosition(position) {\n    if (position === 'left') {\n        $$('.waifu-tool').style.right = 'unset';\n        $$('.waifu-tool').style.left = '10px';\n        waifu.style.right = 'unset';\n        waifu.style.left = live2d_settings.waifuEdgeSide.split(\":\")[1];\n    } else if (position === 'right') {\n        $$('.waifu-tool').style.left = 'unset';\n        $$('.waifu-tool').style.right = '10px';\n        waifu.style.left = 'unset';\n        waifu.style.right = live2d_settings.waifuEdgeSide.split(\":\")[1];\n    } else {\n        $$('.waifu-tool').style.left = '';\n        $$('.waifu-tool').style.right = '';\n        waifu.style.left = '';\n        waifu.style.right = '';\n    }\n}\n\n\nfunction initModel() {\n    /* Load style sheet */\n    addStyle(waifuStyle);\n    if (getSS('waifuHide') === '1') {\n        waifu.classList.add('hide');\n        return;\n    } else {\n        waifu.classList.remove('hide');\n    }\n    /* console welcome message */\n    console.log(\"\\u304f__,.\\u30d8\\u30fd.\\u3000\\u3000\\u3000\\u3000/\\u3000,\\u30fc\\uff64 \\u3009\\n\\u3000\\u3000\\u3000\\u3000\\u3000\\uff3c ', !-\\u2500\\u2010-i\\u3000/\\u3000/\\u00b4\\n\\u3000\\u3000\\u3000 \\u3000 \\uff0f\\uff40\\uff70'\\u3000\\u3000\\u3000 L/\\uff0f\\uff40\\u30fd\\uff64\\n\\u3000\\u3000 \\u3000 /\\u3000 \\uff0f,\\u3000 /|\\u3000 ,\\u3000 ,\\u3000\\u3000\\u3000 ',\\n\\u3000\\u3000\\u3000\\uff72 \\u3000/ /-\\u2010/\\u3000\\uff49\\u3000L_ \\uff8a \\u30fd!\\u3000 i\\n\\u3000\\u3000\\u3000 \\uff9a \\uff8d 7\\uff72\\uff40\\uff84\\u3000 \\uff9a'\\uff67-\\uff84\\uff64!\\u30cf|\\u3000 |\\n\\u3000\\u3000\\u3000\\u3000 !,/7 '0'\\u3000\\u3000 \\u00b40i\\u30bd| \\u3000 |\\u3000\\u3000\\u3000\\n\\u3000\\u3000\\u3000\\u3000 |.\\u4ece\\\"\\u3000\\u3000_\\u3000\\u3000 ,,,, / |./ \\u3000 |\\n\\u3000\\u3000\\u3000\\u3000 \\uff9a'| i\\uff1e.\\uff64,,__\\u3000_,.\\u30a4 / \\u3000.i \\u3000|\\n\\u3000\\u3000\\u3000\\u3000\\u3000 \\uff9a'| | / k_\\uff17_/\\uff9a'\\u30fd,\\u3000\\uff8a.\\u3000|\\n\\u3000\\u3000\\u3000\\u3000\\u3000\\u3000 | |/i \\u3008|/\\u3000 i\\u3000,.\\uff8d |\\u3000i\\u3000|\\n\\u3000\\u3000\\u3000\\u3000\\u3000\\u3000.|/ /\\u3000\\uff49\\uff1a \\u3000 \\uff8d!\\u3000\\u3000\\uff3c\\u3000|\\n\\u3000\\u3000\\u3000 \\u3000 \\u3000 k\\u30fd>\\uff64\\uff8a \\u3000 _,.\\uff8d\\uff64 \\u3000 /\\uff64!\\n\\u3000\\u3000\\u3000\\u3000\\u3000\\u3000 !'\\u3008//\\uff40\\uff34\\u00b4', \\uff3c \\uff40'7'\\uff70r'\\n\\u3000\\u3000\\u3000\\u3000\\u3000\\u3000 \\uff9a'\\u30fdL__|___i,___,\\u30f3\\uff9a|\\u30ce\\n\\u3000\\u3000\\u3000\\u3000\\u3000 \\u3000\\u3000\\u3000\\uff84-,/\\u3000|___./\\n\\u3000\\u3000\\u3000\\u3000\\u3000 \\u3000\\u3000\\u3000'\\uff70'\\u3000\\u3000!_,.:\\nLive2D \\u770b\\u677f\\u5a18 v\" + live2d_settings.l2dVersion + \" / Konata\");\n\n    $$(`#${live2dId2}`).setAttribute('height', live2d_settings.live2dHeight);\n    $$(`#${live2dId2}`).setAttribute('width', live2d_settings.live2dWidth);\n    $$(`#${live2dId4}`).setAttribute('height', live2d_settings.live2dHeight);\n    $$(`#${live2dId4}`).setAttribute('width', live2d_settings.live2dWidth);\n    if (!live2d_settings.showToolMenu) $$('.waifu-tool').classList.add('hide');\n    if (!live2d_settings.canCloseLive2d) $$('.waifu-tool .icon-cross').classList.add('hide');\n    if (!live2d_settings.canSwitchModel) $$('.waifu-tool .icon-next').classList.add('hide');\n    if (!live2d_settings.canSwitchHitokoto) $$('.waifu-tool .icon-message').classList.add('hide');\n    if (!live2d_settings.canTakeScreenshot) $$('.waifu-tool .icon-camera').classList.add('hide');\n    if (!live2d_settings.canTurnToHomePage) $$('.waifu-tool .icon-home').classList.add('hide');\n    if (!live2d_settings.canTurnToAboutPage) $$('.waifu-tool .icon-about').classList.add('hide');\n    if (!live2d_settings.showVolumeBtn) $$('.waifu-tool .icon-volumeup').classList.add('hide') || $$('.waifu-tool .icon-volumedown').classList.add('hide');\n    $$('.waifu-tool .icon-next').addEventListener('click', () => loadOtherModel());\n    $$('.waifu-tool .icon-home').addEventListener('click', () => window.location = live2d_settings.homePageUrl)\n    $$('.waifu-tool .icon-about').addEventListener('click', () => window.open(live2d_settings.aboutPageUrl))\n    $$('.waifu-tool .icon-camera').addEventListener('click', () => {\n        window.live2dCurrentVersion === 3 ? window.live2dv4.CaptureCanvas() : window.live2dv2.captureFrame = true;\n    });\n    $$('.waifu-tool .icon-cross').addEventListener('click', () => {\n        sessionStorage.setItem('waifuHide', '1');\n        window.setTimeout(function () {\n            waifu.classList.add('hide');\n            document.getElementById('show-live2d').classList.remove('btnHide');\n        }, 1000);\n    })\n\n    window.waifuResize = () => {\n        if (getSS('waifuHide') !== '1')\n            window.innerWidth <= Number(live2d_settings.waifuMinWidth.replace('px', '')) ? waifu.classList.add('hide') : waifu.classList.remove('hide');\n    };\n\n    if (live2d_settings.waifuMinWidth !== 'disable') {\n        waifuResize();\n        window.addEventListener('resize', waifuResize)\n    }\n\n    live2d_settings.homePageUrl = live2d_settings.homePageUrl === 'auto' ? window.location.protocol + '//' + window.location.hostname + '/' : live2d_settings.homePageUrl;\n\n    if (live2d_settings.tipsMessage)\n        window.fetch(live2d_settings.tipsMessage)\n            .then(res => res.json())\n            .then(resjson => loadTipsMessage(resjson));\n\n    let modelName = getLS('modelName');\n\n    if (!live2d_settings.modelStorage || modelName == null)\n        modelName = live2d_settings.modelName;\n\n    window.live2dv4.setPreLoadMotion(live2d_settings.preLoadMotion);\n    window.live2dv2.debug = live2d_settings.debug;\n    window.live2dv4.debug = live2d_settings.debug;\n    window.live2dv2.debugMousemove = live2d_settings.debug && live2d_settings.debugMousemove;\n    window.live2dv4.debugMousemove = live2d_settings.debug && live2d_settings.debugMousemove;\n    if (live2d_settings.tryWebp) {\n        testWebP().then(r => window.webpReady = r).then(() => {\n            if (window.webpReady === true)\n                console.log(\"[WaifuTips] Your browser support WebP format. Try to load WebP texture first.\");\n            else\n                console.log(\"[WaifuTips] Your browser do not support WebP format.\");\n            loadModel(modelName);\n        });\n    } else {\n        loadModel(modelName);\n    }\n}\n\nfunction loadModel(modelName) {\n    if (live2d_settings.modelStorage)\n        setLS('modelName', modelName);\n    else\n        setSS('modelName', modelName);\n    live2d_settings.debug && console.log(`[WaifuTips] load model: ${modelName}`);\n    let modelVersion = 2;\n    // 在配置中找到要加载模型的版本\n    for (let model of live2d_models) {\n        if (model.name === modelName) {\n            modelVersion = model.version;\n            changePosition(model.position);\n            break;\n        }\n    }\n    // 如果要加载的模型版本不同，先释放之前的SDK并隐藏canvas\n    if (window.live2dCurrentVersion !== modelVersion) {\n        if (window.live2dCurrentVersion === 2) {\n            window.live2dv2.release();\n            $$(`#${live2dId2}`).style.display = 'none';\n        } else {\n            window.live2dv4.release();\n            $$(`#${live2dId4}`).style.display = 'none';\n        }\n    }\n    // 根据模型版本选择不同的SDK加载\n    if (modelVersion === 2) {\n        $$(`#${live2dId2}`).style.display = 'block';\n        window.live2dv2.load(live2dId2, `${live2d_settings.modelUrl}/${modelName}/model.json`);\n    } else if (window.live2dCurrentVersion === modelVersion) {\n        window.live2dv4.change(`${live2d_settings.modelUrl}/${modelName}`, `${modelName}.model3.json`);\n    } else {\n        $$(`#${live2dId4}`).style.display = 'block';\n        window.live2dv4.load(live2dId4, `${live2d_settings.modelUrl}/${modelName}`, `${modelName}.model3.json`);\n    }\n\n    window.live2dCurrentVersion = modelVersion;\n}\n\n// 读取记忆的模型\nfunction modelStorageGetItem(key) {\n    return live2d_settings.modelStorage ? getLS(key) : getSS(key);\n}\n\nfunction loadOtherModel() {\n    const modelName = modelStorageGetItem('modelName');\n    let modelIndex = 0;\n    if (live2d_settings.modelRandMode) {\n        modelIndex = Math.floor(Math.random() * live2d_models.length + 1) - 1;\n    } else {\n        modelIndex = live2d_models.findIndex(modelObj => modelObj.name === modelName)\n        if (modelIndex < live2d_models.length - 1)\n            modelIndex++;\n        else\n            modelIndex = 0;\n    }\n    if (live2d_models[modelIndex].message) showMessage(live2d_models[modelIndex].message, 3000, true);\n    loadModel(live2d_models[modelIndex].name);\n}\n\n\nfunction loadTipsMessage(result) {\n    window.waifu_tips = result;\n\n    const mouseenterListener = (e, tips) => {\n        e.addEventListener('mouseenter', () => {\n            let text = getRandText(tips.text);\n            if (text.indexOf(\"{text}\") > 0)\n                text = text.replace(/{text}/, e.innerText);\n            showMessage(text, 3000);\n        });\n    }\n    const addMouseoverListener = () => {\n        for (let tips of result.mouseover) {\n            const select = $$(tips.selector);\n            if (Array.isArray(select))\n                select.forEach(e => mouseenterListener(e, tips));\n            else if (select)\n                mouseenterListener(select, tips);\n            else\n                live2d_settings.debug && console.warn(`[WaifuTips] can not found element: ${tips.selector}`)\n        }\n    }\n    const addClickListener = () => {\n        for (let tips of result.click) {\n            const select = $$(tips.selector);\n            if (Array.isArray(select))\n                select.forEach(e => e.addEventListener('click', () => {\n                    let text = getRandText(tips.text);\n                    showMessage(text, 3000, true);\n                }))\n            else if (select)\n                select.addEventListener('click', () => {\n                    let text = getRandText(tips.text);\n                    showMessage(text, 3000, true);\n                })\n            else\n                live2d_settings.debug && console.warn(`[WaifuTips] can not found element: ${tips.selector}`)\n        }\n    }\n    for (let tips of result.seasons) {\n        const now = new Date();\n        const after = tips.date.split('-')[0];\n        const before = tips.date.split('-')[1] || after;\n        if ((after.split('/')[0] <= now.getMonth() + 1 && now.getMonth() + 1 <= before.split('/')[0]) &&\n            (after.split('/')[1] <= now.getDate() && now.getDate() <= before.split('/')[1])) {\n            let text = getRandText(tips.text);\n            if (text.indexOf(\"{year}\") > 0)\n                text = text.replace(/{year}/, now.getFullYear());\n            showMessage(text, 6000, true);\n        }\n    }\n    if (live2d_settings.showF12OpenMsg) {\n        re.toString = function () {\n            showMessage(getRandText(result.waifu.console_open_msg), 5000, true);\n            return '';\n        };\n    }\n    const addCopyListener = () => {\n        if ($$('#articleContent').length !== 0)\n            $$('#articleContent').addEventListener('copy', () => (showMessage(getRandText(result.waifu.copy_message), 5000, true)));\n    }\n    window.showWelcomeMessage = function (result) {\n        let text;\n        if (window.location.href === live2d_settings.homePageUrl) {\n            const now = (new Date()).getHours();\n            if (now > 23 || now <= 5) text = getRandText(result.waifu.hour_tips['t23-5']);\n            else if (now > 5 && now <= 7) text = getRandText(result.waifu.hour_tips['t5-7']);\n            else if (now > 7 && now <= 11) text = getRandText(result.waifu.hour_tips['t7-11']);\n            else if (now > 11 && now <= 14) text = getRandText(result.waifu.hour_tips['t11-14']);\n            else if (now > 14 && now <= 17) text = getRandText(result.waifu.hour_tips['t14-17']);\n            else if (now > 17 && now <= 19) text = getRandText(result.waifu.hour_tips['t17-19']);\n            else if (now > 19 && now <= 21) text = getRandText(result.waifu.hour_tips['t19-21']);\n            else if (now > 21 && now <= 23) text = getRandText(result.waifu.hour_tips['t21-23']);\n            else text = getRandText(result.waifu.hour_tips.default);\n        } else {\n            const referrer_message = result.waifu.referrer_message;\n            if (document.referrer !== '') {\n                const referrer = document.createElement('a');\n                referrer.href = document.referrer;\n                const domain = referrer.hostname.split('.')[1];\n                if (window.location.hostname === referrer.hostname)\n                    text = referrer_message.localhost[0] + document.title.split(referrer_message.localhost[2])[0] + referrer_message.localhost[1];\n                else if (domain === 'baidu')\n                    text = referrer_message.baidu[0] + referrer.search.split('&wd=')[1].split('&')[0] + referrer_message.baidu[1];\n                else if (domain === 'so')\n                    text = referrer_message.so[0] + referrer.search.split('&q=')[1].split('&')[0] + referrer_message.so[1];\n                else if (domain === 'google')\n                    text = referrer_message.google[0] + document.title.split(referrer_message.google[2])[0] + referrer_message.google[1];\n                else {\n                    text = referrer_message.default[0] + referrer.hostname + referrer_message.default[1];\n                    for (let host in result.waifu.referrer_hostname)\n                        if (host === referrer.hostname) {\n                            text = getRandText(result.waifu.referrer_hostname[host]);\n                            break;\n                        }\n                }\n            } else text = referrer_message.none[0] + document.title.split(referrer_message.none[2])[0] + referrer_message.none[1];\n        }\n        showMessage(text, 6000);\n    };\n    if (live2d_settings.showWelcomeMessage) showWelcomeMessage(result);\n\n    const waifu_tips = result.waifu;\n\n    if (live2d_settings.showHitokoto) {\n        window.getActed = false;\n        window.hitokotoTimer = 0;\n        window.hitokotoInterval = false;\n        setInterval(function () {\n            if (!getActed) ifActed();\n            else elseActed();\n        }, 1000);\n    }\n    /* 检测用户活动状态，并在空闲时显示一言 */\n    const addHitokotoListener = () => {\n        document.addEventListener('mousemove', () => (getActed = true))\n        document.addEventListener('keydown', () => (getActed = true))\n    }\n\n    if (document.readyState === \"interactive\" || document.readyState === \"complete\") {\n        addMouseoverListener();\n        addClickListener();\n        if (live2d_settings.showCopyMessage) addCopyListener();\n        if (live2d_settings.showHitokoto) addHitokotoListener();\n    } else {\n        window.addEventListener(\"DOMContentLoaded\", addMouseoverListener);\n        window.addEventListener(\"DOMContentLoaded\", addClickListener);\n        if (live2d_settings.showCopyMessage) window.addEventListener(\"DOMContentLoaded\", addCopyListener);\n        if (live2d_settings.showHitokoto) window.addEventListener(\"DOMContentLoaded\", addHitokotoListener);\n    }\n\n    function ifActed() {\n        if (!hitokotoInterval) {\n            hitokotoInterval = true;\n            hitokotoTimer = window.setInterval(showHitokotoActed, 30000);\n        }\n    }\n\n    function elseActed() {\n        getActed = hitokotoInterval = false;\n        window.clearInterval(hitokotoTimer);\n    }\n\n    function showHitokotoActed() {\n        if (document.visibilityState === 'visible') showHitokoto();\n    }\n\n    function showHitokoto() {\n        switch (live2d_settings.hitokotoAPI) {\n            case 'lwl12.com':\n                window.fetch('https://api.lwl12.com/hitokoto/v1?encode=realjson')\n                    .then(res => res.json())\n                    .then(resJson => {\n                        if (!resJson.source) {\n                            let text = waifu_tips.hitokoto_api_message['lwl12.com'][0];\n                            if (!resJson.author) text += waifu_tips.hitokoto_api_message['lwl12.com'][1];\n                            text = text.render({source: resJson.source, creator: resJson.author});\n                            window.setTimeout(function () {\n                                showMessage(text + waifu_tips.hitokoto_api_message['lwl12.com'][2], 3000, true);\n                            }, 5000);\n                        }\n                        showMessage(resJson.text, 5000, true);\n                    })\n                break;\n            case 'fghrsh.net':\n                window.fetch('https://api.fghrsh.net/hitokoto/rand/?encode=jsc&uid=3335')\n                    .then(res => res.json())\n                    .then(resJson => {\n                        if (!resJson.source) {\n                            let text = waifu_tips.hitokoto_api_message['fghrsh.net'][0];\n                            text = text.render({source: resJson.source, date: resJson.date});\n                            window.setTimeout(function () {\n                                showMessage(text, 3000, true);\n                            }, 5000);\n                            showMessage(resJson.hitokoto, 5000, true);\n                        }\n                    })\n                break;\n            case 'jinrishici.com':\n                window.fetch('https://v2.jinrishici.com/one.json')\n                    .then(res => res.json())\n                    .then(resJson => {\n                        if (!resJson.data.origin.title) {\n                            let text = waifu_tips.hitokoto_api_message['jinrishici.com'][0];\n                            text = text.render({\n                                title: resJson.data.origin.title,\n                                dynasty: resJson.data.origin.dynasty,\n                                author: resJson.data.origin.author\n                            });\n                            window.setTimeout(function () {\n                                showMessage(text, 3000, true);\n                            }, 5000);\n                        }\n                        showMessage(resJson.data.content, 5000, true);\n                    })\n                break;\n            default:\n                window.fetch('https://v1.hitokoto.cn')\n                    .then(res => res.json())\n                    .then(resJson => {\n                        if (!resJson.from) {\n                            let text = waifu_tips.hitokoto_api_message['hitokoto.cn'][0];\n                            text = text.render({source: resJson.from, creator: resJson.creator});\n                            window.setTimeout(function () {\n                                showMessage(text, 3000, true);\n                            }, 5000);\n                        }\n                        showMessage(resJson.hitokoto, 5000, true);\n                    })\n        }\n    }\n\n    $$('.waifu-tool .icon-message').addEventListener('click', () => showHitokoto());\n}\n\nconst addStyle = (() => {\n    const style = document.createElement('style');\n    document.head.append(style);\n    return (styleString) => style.textContent = styleString;\n})();\n\nconst blobDownload = (blob) => {\n    if (typeof blob == 'object' && blob instanceof Blob) {\n        blob = URL.createObjectURL(blob); // 创建blob地址\n    }\n    const aLink = document.createElement('a');\n    aLink.href = blob;\n    aLink.download = live2d_settings.screenshotCaptureName || 'live2d.png'; // HTML5新增的属性，指定保存文件名，可以不要后缀，注意，file:///模式下不会生效\n    let event;\n    if (window.MouseEvent) event = new MouseEvent('click');\n    else {\n        event = document.createEvent('MouseEvents');\n        event.initMouseEvent('click', true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n    }\n    aLink.dispatchEvent(event);\n}\n\nconst waifuStyle = `\n#waifu {\n${live2d_settings.waifuEdgeSide}px;\nposition:fixed;\nbottom:0;\nz-index:998;\nfont-size:0\n}\n\n#waifu-message {\nfont-size:1rem;\nwidth:-moz-fit-content;\nwidth:fit-content;\nheight:auto;\nleft:2rem;\ntop:20px;\nopacity:0;\nz-index:998;\nmargin:auto;\npadding:5px 10px;\nborder:1px solid rgba(104,216,255,0.62);\nborder-radius:12px;\nbackground-color:rgba(76,191,255,0.8);\nbox-shadow:0 3px 15px 2px rgba(16,51,49,0.3);\ntext-overflow:ellipsis;\noverflow:hidden;\nposition:relative;\nanimation-delay:5s;\nanimation-duration:50s;\nanimation-iteration-count:infinite;\nanimation-name:shake;\nanimation-timing-function:ease-in-out;\ntransition:opacity .3s ease\n}\n\n#waifu-message>a {\ncolor:#7500b7;\n}\n\n#live2d2,#live2d4 {\nposition:relative;\ndisplay:none;\nz-index:997\n}\n\n.waifu-tool {\ndisplay:none;\ncolor:#d73b66;\ntop:130px;\n${live2d_settings.waifuEdgeSide.split(\":\")[0]}:10px;\nposition:absolute;\nz-index:998\n}\n\n#waifu:hover > .waifu-tool {\ndisplay:block\n}\n\n.waifu-tool > span {\nfont-family:\"waifuico\"!important;\ndisplay:block;\ncursor:pointer;\ncolor:#0396FF;\ntransition:.2s;\nfont-size:18px;\nfont-style:normal;\n-webkit-font-smoothing:antialiased;\n-moz-osx-font-smoothing:grayscale\n}\n\n.waifu-tool > span:hover {\ncolor:#43CBFF\n}\n\n.waifu-tool > .icon-next:before{padding-left:1px;content:\"\\\\e6ba\"}.waifu-tool > .icon-message:before{content:\"\\\\e632\"}.waifu-tool > .icon-cross:before{content:\"\\\\e606\"}.waifu-tool > .icon-about:before{content:\"\\\\e60c\"}.waifu-tool > .icon-home:before{content:\"\\\\e604\"}.waifu-tool > .icon-camera:before{content:\"\\\\e635\"}.waifu-tool > .icon-volumedown:before{content:\"\\\\e6c2\"}.waifu-tool > .icon-volumeup:before{content:\"\\\\e6c3\"}#waifu.hide,.waifu-tool > span.hide{display:none}@font-face{font-family:\"waifuico\";src:url(data:application/x-font-woff2;charset=utf-8;base64,d09GMgABAAAAAAWcAAsAAAAAC0gAAAVNAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHEIGVgCEAgqIVIcCATYCJAMkCxQABCAFhG0HchuYCVGUT06K7OeB7R6lCBOgbWnZzIYDWz+EMHANCwis4uG/tdf7dmbx/wC6VAGqgCuhAwBFIEwVsNJVwEb21LKO3q1lyz+tCZvx3+UrWlPV795l73pusllKVXgcRqIMCNk9wkGaA/IP1K2mWg6WmlnR1Qqa7lwLoaYD/FpfOAE/f7i06QU2n2W5rPV/cy2K44ACGrcnLqDD0wI/YTkL68xspUBnvQo9T6CzQkdr1/bhCczKuDJQdj1LDMwmDHIFPTTqquDavDGelJricfGKl+7w8d98zFIoE/6iA9e2Ylj9lX1P9TmTXns0nA3bm0jYCGTiTaHjmRQkNprQnXOzC8C4sE0w1P4qQ/OWvPO97zOkb72kik5d+CcPlJKsUAm1hqhw1ZCot5MNv7LiUvKr4pL4NVSqQvPQKYCWoNQMvYNOAH2DTg30HQ0a0JprJoEpEPsB4i2ON7lEyOJpoGWF9Uoz6iBtQmEZSR0YgyVVYPFeOIPN3GSY5uUOTjKmlLks4xwO30ihSfCIyrtB4/PlZurwHsUBoelpYahQGMsORi9mnmOcZ53Fz4BQ8IuaCKZRdi7BW+cZ52Szpw+ehI6b5uVwWNcZJrl5XEaG4Bld+DyO/5TGe5LbP7LAWhojkRiji8z5YcW4eTbOYXEZBO3YphYFXCQmlfO4fOOcAZytB5LH1+1A0uQ5B/DIGQ0gj8ejLuvzhMI4gSALZBJK9MFFEGbOK1D72SB4ZF2DPLFhL3v8OkqZ3MwXCOi1BHU/icfLYxIMLouDs5sWjxhRQR6VjJ+FINpJiKW8dBgVnzyUAzNnYNNHlnYjV2upFMVP6IFi1tXVmW8ihqPPJMWLn3H3seGju3ci3kxPEJTA0jrAQ0fD8Bh6dl1hXf0jKHdKaRsxTzcO0JWMCoNpvbEutxBvrD4E64xscguymJWl87Zjuz13sbN3o1/REc9hj2HPEfRfUA14VOUN+7FLSlHD9gF0AN/dJbxQrsdqTB3bWeDw0/XbbtrtD/xvuymCYSI3VzoM07Joq6QFcq1EreSY1AupY67wGmL52IowWn008LOtnCa+PdJrVOzu58O13kDd54MrhoRV1HZxf/zUr1jBGrG7pF/6h14kOo20kntvDF6kSO5t+TgvfqwJSQ/VSg0rQ5KRsjB/bGg60jQ9Ai1DI9N26w1XrItJXd3kYnKRURRvBJG8CHy8T2KLtC/qq2WL2gJ6vtlO77JfPuylAcBR1HTZpJf91SwxeD4oigJToj4caJer06uTaZep061vZt/78dVJJWe2AnU4gB5PDpTgyF6yu7ScXvf3eIak4yE/dIofEGczzzlM3ABqvZvHHD39P3t+ZdNyM/gthH9c/L6TBMMoWrqXvkajeBuRb7kuP60g/JddpNzY5pNEGfo/hx8k0VMSdQi2thsxVqATC3y7PZM+hsUzjVX+THgmgkJtDpLGSmKmboTSwCJUGluhs8HOzQNTxITILdZ7ZBDGvUBh1GdIxr0RM/UdSrN+oTIeE9A5FlP3HFgd2fxOIaMUo73CLOLaSbPO+/IjSkJpJC51jDMSn4Vx2Buk0ztUkwxxgT9PRqoOnXCF2+xlVJaMjXBOkfZS1Wbc77uib+pFXMG8nQQxFIkh6wrKRFjNmeVqPrP/IyQRlAyp6HvmPUOEl62PhnoGDYg7qrpR36XUeucSI0oxB7ltKaugbbKRUiQYaoqPypGI6kk7xBpjfZrnmqp60+PqsV6BDv+YNopIkaOMKupooo1OvkmXOnODvDcJTV0W9tVTFy0Hnb6Xmpwrmr5sqjtz7PwxLkNFMV/Us6E/NAAAAAA=) format(\"woff2\"),url(waifuico.woff?t=1597741284606) format(\"woff\")}@keyframes shake{2%{transform:translate(0.5px,-1.5px) rotate(-0.5deg)}4%{transform:translate(0.5px,1.5px) rotate(1.5deg)}6%{transform:translate(1.5px,1.5px) rotate(1.5deg)}8%{transform:translate(2.5px,1.5px) rotate(0.5deg)}10%{transform:translate(0.5px,2.5px) rotate(0.5deg)}12%{transform:translate(1.5px,1.5px) rotate(0.5deg)}14%{transform:translate(0.5px,0.5px) rotate(0.5deg)}16%{transform:translate(-1.5px,-0.5px) rotate(1.5deg)}18%{transform:translate(0.5px,0.5px) rotate(1.5deg)}20%{transform:translate(2.5px,2.5px) rotate(1.5deg)}22%{transform:translate(0.5px,-1.5px) rotate(1.5deg)}24%{transform:translate(-1.5px,1.5px) rotate(-0.5deg)}26%{transform:translate(1.5px,0.5px) rotate(1.5deg)}28%{transform:translate(-0.5px,-0.5px) rotate(-0.5deg)}30%{transform:translate(1.5px,-0.5px) rotate(-0.5deg)}32%{transform:translate(2.5px,-1.5px) rotate(1.5deg)}34%{transform:translate(2.5px,2.5px) rotate(-0.5deg)}36%{transform:translate(0.5px,-1.5px) rotate(0.5deg)}38%{transform:translate(2.5px,-0.5px) rotate(-0.5deg)}40%{transform:translate(-0.5px,2.5px) rotate(0.5deg)}42%{transform:translate(-1.5px,2.5px) rotate(0.5deg)}44%{transform:translate(-1.5px,1.5px) rotate(0.5deg)}46%{transform:translate(1.5px,-0.5px) rotate(-0.5deg)}48%{transform:translate(2.5px,-0.5px) rotate(0.5deg)}50%{transform:translate(-1.5px,1.5px) rotate(0.5deg)}52%{transform:translate(-0.5px,1.5px) rotate(0.5deg)}54%{transform:translate(-1.5px,1.5px) rotate(0.5deg)}56%{transform:translate(0.5px,2.5px) rotate(1.5deg)}58%{transform:translate(2.5px,2.5px) rotate(0.5deg)}60%{transform:translate(2.5px,-1.5px) rotate(1.5deg)}62%{transform:translate(-1.5px,0.5px) rotate(1.5deg)}64%{transform:translate(-1.5px,1.5px) rotate(1.5deg)}66%{transform:translate(0.5px,2.5px) rotate(1.5deg)}68%{transform:translate(2.5px,-1.5px) rotate(1.5deg)}70%{transform:translate(2.5px,2.5px) rotate(0.5deg)}72%{transform:translate(-0.5px,-1.5px) rotate(1.5deg)}74%{transform:translate(-1.5px,2.5px) rotate(1.5deg)}76%{transform:translate(-1.5px,2.5px) rotate(1.5deg)}78%{transform:translate(-1.5px,2.5px) rotate(0.5deg)}80%{transform:translate(-1.5px,0.5px) rotate(-0.5deg)}82%{transform:translate(-1.5px,0.5px) rotate(-0.5deg)}84%{transform:translate(-0.5px,0.5px) rotate(1.5deg)}86%{transform:translate(2.5px,1.5px) rotate(0.5deg)}88%{transform:translate(-1.5px,0.5px) rotate(1.5deg)}90%{transform:translate(-1.5px,-0.5px) rotate(-0.5deg)}92%{transform:translate(-1.5px,-1.5px) rotate(1.5deg)}94%{transform:translate(0.5px,0.5px) rotate(-0.5deg)}96%{transform:translate(2.5px,-0.5px) rotate(-0.5deg)}98%{transform:translate(-1.5px,-1.5px) rotate(-0.5deg)}0%,100%{transform:translate(0,0) rotate(0)}}\n`;\ninitModel();\nwindow.downloadCap = blobDownload;\nwindow.initModel = initModel;\n\n\n//# sourceURL=webpack://hexo-site/./themes/hexo-theme-matery/source/live2d/waifu-tips.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		if(__webpack_module_cache__[moduleId]) {
/******/ 			return __webpack_module_cache__[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	// startup
/******/ 	// Load entry module
/******/ 	__webpack_require__("./themes/hexo-theme-matery/source/js/hexo.js");
/******/ 	// This entry module used 'exports' so it can't be inlined
/******/ })()
;